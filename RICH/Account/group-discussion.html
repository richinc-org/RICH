<!DOCTYPE html>
<html lang="en">

<script>

var userInfo;
getUserInfo();
//alert(userInfo);
if (userInfo == ""){
  //window.location.href = "../notLogin.html";
}

function getUserInfo(){
  mode = "getInfo";

  var xhttp = new XMLHttpRequest();
  var url = "../php/UsersRICH.php";
  var params = "mode=" + mode;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      userInfo = this.responseText;
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

</script>

<head>

  <title>RICH &mdash; Reach Into Cultural Heights</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />

  <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700|Work+Sans:300,400,700" rel="stylesheet">
  <link rel="stylesheet" href="../fonts/icomoon/style.css">

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/magnific-popup.css">
  <link rel="stylesheet" href="../css/jquery-ui.css">
  <link rel="stylesheet" href="../css/owl.carousel.min.css">
  <link rel="stylesheet" href="../css/owl.theme.default.min.css">
  <link rel="stylesheet" href="../css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="../css/animate.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mediaelement@4.2.7/build/mediaelementplayer.min.css">

  <link rel="stylesheet" href="../fonts/flaticon/font/flaticon.css">

  <link rel="stylesheet" href="../css/aos.css">

  <link rel="stylesheet" href="../css/style.css">

  <style>
    .collection-button {
    border: 3px solid #2f4279;
    padding: 5px 12px;
    color: #2f4279;
    background: transparent;
    transition: 150ms linear;
    font-weight: bold;
    font-family: 'Josefin Sans', sans-serif;
    }

    .collection-button:hover {
    color: white;
    background: #2f4279;
  }

    .Zero {
      border-top-left-radius: 5px;
      border-bottom: none;
      border-right: none;
    }

    .One {
      border-top-right-radius: 5px;
      border-bottom: none;
    }

    .Two {
      border-bottom-left-radius: 5px;
      border-right: none;
    }

    .Three {
      border-bottom-right-radius: 5px;
    }
  </style>

</head>
<body>

  <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    <div id = "myLogo" style = "padding: 0;" class="site-navbar-wrap js-site-navbar bg-white">

      <div id = "navigationBar" class="container-fluid">

        <div class="text-center">
          <a href = "../index.html"><img class = "img-fluid" src="../images/LOGO-Larger.png"  href="../index.html" alt="..."></a>
        </div>

        <div class="site-navbar bg-light">
          <div class="py-1">
            <div class="row align-items-left">
              <li> <a href="logout.php"><button style="font-size: 16px; position: absolute; top:50px; right:50px ;" class="portalbutton"> LOGOUT </button></a></li>
              <div class="col-12">
                <nav class="site-navigation text-right" role="navigation">
                  <div class="container-fluid">
                    <div class="d-inline-block d-lg-none ml-md-0 mr-auto py-3"><a href="#"
                        class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>

                    <ul class="site-menu js-clone-nav d-none d-lg-block">

                      <li style="float:left;">
                        <div style="font-size: 27px;" id="userInfo">
                        </div>
                        
                      </li>
                      <li><a style="font-size: 16px;" class="activelink"
                          href="https://www.richinc.org/RICH/Account/portal-home.html">Home</a></li>
                      <li class="has-children">
                        <a style="font-size: 16px;color:#c51f1f;" href="https://www.richinc.org/RICH/Account/weekly-writings.php" >RICH
                          Reflective Writing</a>
                        <ul class="dropdown arrow-top">
                          <li><a href="https://www.richinc.org/RICH/Account/weekly-writings.php">Weekly-Writings</a></li>
                          <li><a href="https://www.richinc.org/RICH/Account/mywritings.php">My Writings</a></li>
                          <li><a href="https://www.richinc.org/RICH/Account/group-discussion.html">Group Discussion</a>
                          </li>
                        </ul>
                      </li>
                      <li><a style="font-size: 16px; color:#c5721f;" href="https://www.richinc.org/RICH/Account/redirect.html">Google
                          Classroom</a></li>
                      <li><a style="font-size: 16px;color:#2f7939;"
                          href="https://www.richinc.org/RICH/Account/profile.html">Personal-Profile</a></li>
                      <li><a style="font-size: 16px;"
                          href="https://www.richinc.org/RICH/Account/projects.html">Projects</a></li>
                      <li><a style="font-size: 16px; color:#c51f1f;"
                          href="https://www.richinc.org/RICH/Account/SafeSpace.html" >Safe-Space</a></li>
                      <!-- <li> <a href="logout.php"><button style="font-size: 16px; position:absolute; top:0; right:0 ;" class="portalbutton"> LOGOUT </button></a></li> -->


                    </ul>

                  </div>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id = "logoHeight" style="height: 400px;"></div>


    <!--<div id "logoHeight" style="height: 250px;"></div>-->

    <div style="padding-bottom: 100px; padding-left: 20px; padding-right: 20px;" class="text-center">

      <div> <h4 style="font-size: 40px;"> Join The Group Discussion </h4> </div>
      <div class = "text-center"> <img class = "img-fluid" style = "border-radius: 7px; height: 400px;" src = "../Group.jpg"> </div><br>

      <div id = "piaContainer" style = "padding-left: 5px; padding-right: 5px;" class="container">
        <div style = "padding-left: 0px; padding-right: 0px;" class = "col-md-12 mx-auto no-sidebar" >
          <div id = "assignmentContainer" class="shapely-content">

            <div style = "display: none;" id = "FullName"></div>

            <div id = "myForum">

              <textarea placeholder="Create a New Topic" rows="3" id="topic" style = "width: 100%; border: 1px solid #8585859c;"></textarea>
              <button id = "submitButton" style = "font-size: 16px; width: 100%;" class = "portalbutton"> Submit Essay </button><br><br><br><br>
           
              <!--
              <a id = "submitButton" class = "btn" style = "float: left; background-color: #a8daeb;"> Submit </a><br><br><br><br>
-->
              <p style = "font-size: 18px;"> Pick One of The Following Topics: </p>

              <div style = "padding-left: 15px;" class = "container-fluid">
                <div class = "row" id = "topicsList">


                </div>
              </div>

              <hr id = "showTopic">

              <div class = "container" style = "padding-left: 10px; padding-right: 10px; display: none;" id = "questionArea">

                <textarea placeholder="Type Your Question" rows="3" id="question" style = "width: 100%; border: 1px solid #8585859c;"></textarea>
                <a id = "viewTopic" class = "btn" style = "float: left; background-color: #a8daeb;"> Submit </a><br>

              </div><br><br><br>

              <div class = "container" style = "padding-left: 10px; padding-right: 10px; display: none;" id = "forumQuestions"></div>

              <br><br><br><br><br><br><br><br><br>
            </div>

          </div>
        </div>
      </div>
    </div>


    <footer class="site-footer">
      <div class="container">
  
        <div class="row">
          <div class="col">
            <p class="text-center">
                Email: rich@att.net
                <br>
                Phone: (929) 242-9036
                <br>
                Address: Tech Incubator at Queens College, 65-30 Kissena Blvd, Flushing, NY 11367
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
             <br>
              Copyright &copy;
              <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
              <script>document.write(new Date().getFullYear());</script> All Rights Reserved | This template is made by <a
                href="https://colorlib.com" target="_blank">Colorlib</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
  
        </div>
      </div>
    </footer>
    </div>

  <script src="../js/jquery-3.3.1.min.js"></script>
  <script src="../js/jquery-migrate-3.0.1.min.js"></script>
  <script src="../js/jquery-ui.js"></script>
  <script src="../js/popper.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/owl.carousel.min.js"></script>
  <script src="../js/jquery.stellar.min.js"></script>
  <script src="../js/jquery.countdown.min.js"></script>
  <script src="../js/jquery.magnific-popup.min.js"></script>
  <script src="../js/bootstrap-datepicker.min.js"></script>
  <script src="../js/aos.js"></script>


  <script src="../js/mediaelement-and-player.min.js"></script>

  <script src="../js/main.js"></script>

  <script>

  window.onscroll = function() {

    if (window.pageYOffset > 20) {
      document.getElementById("myLogo").style.top = "-260px";
      document.getElementById("logoHeight").style.height = "220px";
    } else {
      document.getElementById("myLogo").style.top = "0px";
      document.getElementById("logoHeight").style.height = "400px";
    }
  }

  /*
  var date = String(new Date()).substring(3,25);
  alert(date);
  */
  var buttonNumbers = ["Zero", "One", "Two", "Three"];
  var userInfo;
  var topic;
  var boardTopic;
  var Topics = [];
  var Questions = [];
  var Answers = [];
  var totalAnswers = 0;
  var updatesCheck;

  //var userInfo;
  var profileData = [];
  getProfileData();
  if (profileData[0].FirstName == ""){
    window.location.href = "../notLogin.html";
  }
  var lastName = profileData[0].LastName;
  document.getElementById("userInfo").innerHTML = "Hi " + profileData[0].FirstName + " " + lastName.substring(0,1) + ".";
  document.getElementById("FullName").innerHTML = profileData[0].FirstName + " " + profileData[0].LastName;

  displayTopics();

  
  function displayTopics(){
    getTopics();

    for (var i = 0; i < Topics.length; i++){
      var row = document.getElementById("topicsList");

      var col = document.createElement("div");

      col.className = "text-center col-6 collection-button " + buttonNumbers[i];

      /*
      col.style.backgroundColor = "lightblue";
      col.style.border = "1px solid";
      col.style.padding = "10px";
      */
      var topicLink = document.createElement("a");
      col.id = Topics[i].Topic;
      //alert(topicLink.id);

      col.onclick = function() {
        //this.onmouseover = "";
        //this.onmouseout = "";
        //this.style.backgroundColor = "aliceblue";
        showForum(this.id);
        //document.getElementById(this.id).style.backgroundColor = "white";
      }
      /*
      col.onmouseover = function(){
        //topicLink.setAttribute("style", "font-size: 18px; font-weight: 700; cursor: pointer;");
        //this.style.fontSize = "18px";
        //this.style.fontWeight = "700";
        this.style.backgroundColor = "aliceblue";
        this.style.cursor = "pointer";
      }
      col.onmouseout = function(){
        this.style = "";
        this.style.backgroundColor = "lightblue";
        this.style.border = "1px solid";
        this.style.padding = "10px";
      }
      */
      var linkText = document.createTextNode(Topics[i].Topic);
      topicLink.appendChild(linkText);

      col.appendChild(topicLink);
      row.appendChild(col);
    }
  }

  function getUserInfo(){
    mode = "getInfo";

    var xhttp = new XMLHttpRequest();
    var url = "../php/UsersRICH.php";
    var params = "mode=" + mode;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        userInfo = this.responseText;
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function addTopic(){
    mode = "addTopic";
    var topic = document.getElementById("topic").value;

    var xhttp = new XMLHttpRequest();
    var url = "../php/GroupDiscussion.php";
    var params = "mode=" + mode + "&topic=" + topic;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){

      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function getTopics(){
    mode = "getTopics";

    var xhttp = new XMLHttpRequest();
    var url = "../php/GroupDiscussion.php";
    var params = "mode=" + mode;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        var String1 = "No results";
        var result = String1.localeCompare(this.responseText);
        if (result != 0){
          Topics = JSON.parse(this.responseText);
        }
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function Logout(){
    mode = "Logout";

    var xhttp = new XMLHttpRequest();
    var url = "../php/UsersRICH.php";
    var params = "mode=" + mode;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){

      }
    };

    xhttp.open("POST", url, true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);

    window.location.href = "../index.html";
  }

  function showForum(topic){

    boardTopic = topic;
    var forumQuestions = document.getElementById("forumQuestions");
    var QuestionArea = document.getElementById("questionArea");

    QuestionArea.style.display = "block";
    forumQuestions.style.display = "block";
    Questions = [];
    //Answers = [];
    forumQuestions.innerHTML = "";
    getQuestions(topic);
    //alert(Questions[1].Question);
    displayTopicForum(topic);
    setInterval("doUpdates(Questions.length, totalAnswers, boardTopic)", 15000);

    location.href = "#";
    location.href = "#viewTopic";

    //document.getElementById("question").focus();
    //document.getElementById("question").select();
    //window.scrollBy(0, 500);

    //setInterval("doUpdates(Questions.length, totalAnswers, boardTopic)", 30000);
    //setTimeout("checkUpdates()", 15);
  }

  function displayTopicForum(topic){
    var forumQuestions = document.getElementById("forumQuestions");
    Answers = [];
    totalAnswers = 0;

    var topicName = document.createElement("h2");
    topicName.className = "text-center";
    topicName.innerHTML = topic;

    forumQuestions.appendChild(topicName);

    for (var i = 0; i < Questions.length; i++){
      var mainDIV = document.createElement("div");
      mainDIV.id = "mainDIV";
      //alert(Questions.length);
      //var questionROW = document.createElement("div");
      //questionROW.className = "row";

      var questionDIV = document.createElement("div");
      questionDIV.className = "col text-left";
      questionDIV.style.fontSize = "20px";
      var question = document.createTextNode(Questions[i].Entry);
      questionDIV.appendChild(question);

      var userDIV = document.createElement("div");
      userDIV.style.paddingLeft = "20px";
      var imgDIV = document.createElement("div");
      imgDIV.className = "text-left";
      var img = document.createElement("img");
      var imagePath = "https://www.richinc.org/RICH/" + Questions[i].Avatar + "med.png";
      img.src = imagePath.split(" ").join("");
      img.style.borderRadius = "50%";
      //img.style.width = "10%";
      img.className = "img-fluid";
      imgDIV.appendChild(img);
      var nameDIV = document.createElement("p");
      //nameDIV.style.paddingLeft = "20px";
      var name = document.createTextNode(Questions[i].FullName);
      nameDIV.appendChild(name)
      userDIV.appendChild(imgDIV);
      userDIV.appendChild(nameDIV);

      var dateDIV = document.createElement("div");
      dateDIV.className = "col text-right";
      dateDIV.style.fontSize = "12px";
      dateDIV.style.paddingRight = "2px";
      var questionDate = document.createTextNode(Questions[i].EntryDate);
      dateDIV.appendChild(questionDate);

      var button1 = document.createElement("BUTTON");
      button1.className = "btn btn-info";
      button1.id = Questions[i].EntryID;
      button1.style.cssFloat = "left";
      button1.style.marginLeft = "1em";
      //button1.style.backgroundColor = "#a8daeb";
      var buttonText = document.createTextNode("Reply");

      button1.appendChild(buttonText);

      var QID = Questions[i].EntryID;
      //alert(QID);

      getAnswers(QID);
      totalAnswers += Answers.length;
      //alert(totalAnswers);

      button1.addEventListener ('click', function(){
        //alert("BUTTON ID " + this.id);
        reply(this.id);

        //alert(window.pageYOffset)

        //document.getElementById("navigationBar").style.display = "none";
        //location.href = "#";
        //location.href = "#pointP2";
        document.getElementById("replyArea" + this.id).focus();
        document.getElementById("replyArea" + this.id).select();

        // Hide Navbar on reply button click and get back to original position

      });

      //questionROW.appendChild(questionDIV);
      //questionROW.appendChild(dateDIV);
      mainDIV.appendChild(dateDIV);
      mainDIV.appendChild(document.createElement("br"));
      mainDIV.appendChild(userDIV);
      mainDIV.appendChild(document.createElement("br"));
      mainDIV.appendChild(questionDIV);
      //forumQuestions.appendChild(questionDIV);
      mainDIV.appendChild(document.createElement("br"));
      //forumQuestions.appendChild(dateDIV);
      mainDIV.appendChild(document.createElement("br"));
      //forumQuestions.appendChild(EntryID);
      //forumQuestions.appendChild(document.createElement("br"));
      mainDIV.appendChild(button1);
      //forumQuestions.style.paddingBottom = "10px";
      mainDIV.appendChild(document.createElement("br"));
      mainDIV.appendChild(document.createElement("br"));

      var answersContainer = document.createElement("div");
      answersContainer.appendChild(document.createElement("br"));
      answersContainer.appendChild(document.createElement("br"));
      answersContainer.id = "answersContainer" + QID;
      answersContainer.className = "container text-left";
      answersContainer.paddingLeft = "20px"
      //alert(answersContainer.id);
      //answersContainer.className = "container";
      //answersContainer.style.paddingLeft = "120px";

      /*
      if (Answers.length != 0){
      var answersTitle = document.createElement("div");
      answersTitle.className = "text-left";
      var answersText = document.createTextNode("Responses");
      answersTitle.appendChild(answersText);
      answersContainer.appendChild(answersTitle);
      answersContainer.appendChild(document.createElement("br"));
    }
    */
    for (var j = 0; j < Answers.length; j++){
      /*
      var Answer = document.createTextNode("-" + Answers[j].Answer);
      answersContainer.appendChild(Answer);
      answersContainer.appendChild(document.createElement("br"));
      */

      var AnswerDIV = document.createElement("div");
      AnswerDIV.className = "row";

      var userDIV = document.createElement("div");
      userDIV.style.paddingLeft = "20px";
      userDIV.className = "col-md-2 col-lg-2 col-sm-6";
      //userDIV.style.borderRight = "0.2px solid";
      //userDIV.style.borderBottom = "0.2px solid";
      var imgDIV = document.createElement("div");
      imgDIV.className = "text-center";
      var img = document.createElement("img");
      var imagePath = "https://www.richinc.org/RICH/" + Answers[j].Avatar + "sm.png";
      img.src = imagePath.split(" ").join("");
      img.style.borderRadius = "50%";
      //img.style.width = "10%";
      img.className = "img-fluid";
      imgDIV.appendChild(img);
      var nameDIV = document.createElement("p");
      nameDIV.className = "text-center";
      nameDIV.style.fontSize = "12px";
      //nameDIV.style.paddingLeft = "20px";
      var name = document.createTextNode(Answers[j].FullName);
      nameDIV.appendChild(name)
      userDIV.appendChild(imgDIV);
      userDIV.appendChild(nameDIV);

      var Answer = document.createElement("div");
      Answer.className = "col-md-8 col-lg-8 col-sm-6";
      //Answer.style.borderBottom = "0.2px solid";
      Answer.style.paddingLeft = "20px";
      Answer.style.paddingTop = "5px";
      //Answer.style.border = "1px solid";
      var AnswerText = document.createTextNode(Answers[j].Answer);
      Answer.appendChild(AnswerText);

      AnswerDIV.appendChild(userDIV);
      AnswerDIV.appendChild(Answer);

      answersContainer.appendChild(AnswerDIV);
      answersContainer.appendChild(document.createElement("br"));
    }

    mainDIV.appendChild(answersContainer);

    //var referenceDiv = document.createElement("p");
    //referenceDiv.id = "pointP2";

    //mainDIV.appendChild(referenceDiv);

    forumQuestions.appendChild(mainDIV);
    forumQuestions.appendChild(document.createElement("br"));

    Answers = [];

  }
}

document.getElementById("submitButton").onclick = function() {
  var topic = document.getElementById("topic").value;
  if (document.getElementById("topic").value != ""){
    addTopic(topic);
    boardTopic = topic;
    //showForum(topic);

    var row = document.getElementById("topicsList");

    var col = document.createElement("div");
    col.className = "text-center col-6";
    col.style.backgroundColor = "lightblue";
    col.style.border = "1px solid";
    col.style.padding = "10px";

    var topicLink = document.createElement("a");
    col.id = topic;
    //alert(topicLink.id);

    col.onclick = function() {
      showForum(this.id);
    }
    col.onmouseover = function(){
      //topicLink.setAttribute("style", "font-size: 18px; font-weight: 700; cursor: pointer;");
      //this.style.fontSize = "18px";
      //this.style.fontWeight = "700";
      this.style.backgroundColor = "aliceblue";
      this.style.cursor = "pointer";
    }
    col.onmouseout = function(){
      this.style = "";
      this.style.backgroundColor = "lightblue";
      this.style.border = "1px solid";
      this.style.padding = "10px";
    }

    var linkText = document.createTextNode(topic);
    topicLink.appendChild(linkText);

    col.appendChild(topicLink);
    row.appendChild(col);

    document.getElementById("topic").value = "";

    Questions = [];
    forumQuestions.innerHTML = "";
    getQuestions(topic);
    displayTopicForum(topic);
  }
}

document.getElementById("viewTopic").onclick = function() {
  if (document.getElementById("question").value != ""){
    addQuestion(boardTopic);
    document.getElementById("question").value = "";

    Questions = [];
    forumQuestions.innerHTML = "";
    getQuestions(boardTopic);
    displayTopicForum(boardTopic);
  }
}

function reply(EntryID){

  var forumQuestions = document.getElementById("forumQuestions");
  var br = document.createElement("br");
  var answersContainer = document.getElementById("answersContainer" + EntryID);

  if (document.getElementById("replyArea" + EntryID) == null){
    var replyArea = document.createElement("textarea");
    replyArea.id = "replyArea" + EntryID;
    //alert(replyArea.id);

    replyArea.style.border = "4px solid";
    replyArea.style.borderColor = "#a8daeb";
    replyArea.style.paddingLeft = "5px";
    replyArea.style.paddingRight = "5px";
    replyArea.style.width = "100%";

    answersContainer.appendChild(replyArea);

    var button = document.createElement("BUTTON");
    button.className = "btn btn-success";
    button.style.cssFloat = "left";
    button.id = "replySubmitButton";
    //button.style.backgroundColor = "#a8daeb";
    var buttonText = document.createTextNode("Submit");
    button.appendChild(buttonText);
    button.onclick = function(){
      if (document.getElementById("replyArea" + EntryID).value != ""){
        addAnswer(document.getElementById("replyArea" + EntryID).value, EntryID, boardTopic);

        /*
        Questions = [];
        forumQuestions.innerHTML = "";
        getQuestions(topic);
        displayTopicForum(topic);
        */

        totalAnswers++;

        var replyContainer = document.getElementById("answersContainer" + EntryID);
        /*
        var answerDIV = document.createElement("div");
        var textNode = document.createTextNode("-" + document.getElementById("replyArea" + EntryID).value);
        answerDIV.className = "text-left";
        answerDIV.appendChild(textNode);
        */
        var AnswerDIV = document.createElement("div");
        AnswerDIV.className = "row";

        var userDIV = document.createElement("div");
        userDIV.style.paddingLeft = "20px";
        userDIV.className = "col-md-2 col-lg-2 col-sm-6";
        //userDIV.style.borderRight = "0.2px solid";
        //userDIV.style.borderBottom = "0.2px solid";
        var imgDIV = document.createElement("div");
        imgDIV.className = "text-center";
        var img = document.createElement("img");
        var imagePath = "https://www.richinc.org/RICH/" + profileData[0].Avatar + "sm.png";
        img.src = imagePath.split(" ").join("");
        img.style.borderRadius = "50%";
        //img.style.width = "10%";
        img.className = "img-fluid";
        imgDIV.appendChild(img);
        var nameDIV = document.createElement("p");
        nameDIV.style.fontSize = "12px";
        nameDIV.className = "text-center";
        var name = document.createTextNode(document.getElementById("FullName").innerHTML);
        nameDIV.appendChild(name)
        userDIV.appendChild(imgDIV);
        userDIV.appendChild(nameDIV);

        var Answer = document.createElement("div");
        Answer.className = "col-md-8 col-lg-8 col-sm-6";
        //Answer.style.borderBottom = "0.2px solid";
        Answer.style.paddingLeft = "20px";
        Answer.style.paddingTop = "10px";
        //Answer.style.border = "1px solid";
        var AnswerText = document.createTextNode(document.getElementById("replyArea" + EntryID).value);
        Answer.appendChild(AnswerText);

        AnswerDIV.appendChild(userDIV);
        AnswerDIV.appendChild(Answer);

        replyContainer.appendChild(AnswerDIV);

        answersContainer.removeChild(replyArea);
        answersContainer.removeChild(button);
        answersContainer.removeChild(button2);
        answersContainer.removeChild(br);
      }

    }

    var button2 = document.createElement("BUTTON");
    button2.className = "btn btn-danger";
    button2.style.cssFloat = "left";
    //button2.style.backgroundColor = "#a8daeb";
    var buttonText2 = document.createTextNode("Cancel");
    button2.appendChild(buttonText2);

    button2.addEventListener ('click', function(){
      if (document.getElementById("replySubmitButton") != null || document.getElementById("replyArea" + EntryID) != null){
        answersContainer.removeChild(replyArea);
        answersContainer.removeChild(button);
        answersContainer.removeChild(button2);
        answersContainer.removeChild(br);
        //forumQuestions.removeChild(br);
        //document.getElementById("navigationBar").style.display = "block";
      }
    });

    answersContainer.appendChild(button);
    answersContainer.appendChild(button2);
    answersContainer.appendChild(br);
    answersContainer.appendChild(br);

  }

}

function doUpdates(x, y, topic){
  checkUpdates(x, y, topic);

  var forumQuestions = document.getElementById("forumQuestions");
  if (updatesCheck == "updates"){
    Questions = [];
    forumQuestions.innerHTML = "";
    getQuestions(topic);
    displayTopicForum(topic);
  }
}

function checkUpdates(length1, length2, topic){
  mode = "checkUpdates";

  var xhttp = new XMLHttpRequest();
  var url = "../php/GroupDiscussion.php";
  var params = "mode=" + mode + "&length1=" + length1 + "&length2=" + length2 + "&topic=" + topic;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      updatesCheck = this.responseText;
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

function getAnswers(AnswerID){
  mode = "getAnswers";

  var xhttp = new XMLHttpRequest();
  var url = "../php/GroupDiscussion.php";
  var params = "mode=" + mode + "&AnswerID=" + AnswerID;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      var String1 = "No results";
      var result = String1.localeCompare(this.responseText);
      if (result != 0){
        Answers = JSON.parse(this.responseText);
      }
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

function addAnswer(Answer, EntryID, topic){
  mode = "addAnswer";
  avatar = profileData[0].Avatar;

  var xhttp = new XMLHttpRequest();
  var url = "../php/GroupDiscussion.php";
  var params = "mode=" + mode + "&Answer=" + Answer + "&EntryID=" + EntryID + "&topic=" + topic + "&avatar=" + avatar;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){

    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

function addQuestion(topic){
  var date = String(new Date()).substring(3,25);
  var question = document.getElementById("question").value;
  avatar = profileData[0].Avatar;

  mode = "addQuestion";

  var xhttp = new XMLHttpRequest();
  var url = "../php/GroupDiscussion.php";
  var params = "mode=" + mode + "&topic=" + topic + "&date=" + date + "&question=" + question + "&avatar=" + avatar;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){

    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

function getQuestions(topic){

  mode = "getQuestions";

  var xhttp = new XMLHttpRequest();
  var url = "../php/GroupDiscussion.php";
  var params = "mode=" + mode + "&topic=" + topic;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      var String1 = "No results";
      var result = String1.localeCompare(this.responseText);
      if (result != 0){
        Questions = JSON.parse(this.responseText);
      }
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

function getProfileData(){
  mode = "getProfileData";

  var xhttp = new XMLHttpRequest();
  var url = "../php/UsersRICH.php";
  var params = "mode=" + mode;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      profileData = JSON.parse(this.responseText);
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

</script>

</body>
</html>
