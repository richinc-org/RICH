<!DOCTYPE html>
<html lang="en">

<script>

var adminInfo;
getAdminInfo();
if (adminInfo == ""){
  window.location.href = "notAdmin.html";
}

function getAdminInfo(){
  mode = "getAdminInfo";

  var xhttp = new XMLHttpRequest();
  var url = "php/AdminsRICH.php";
  var params = "mode=" + mode;

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200){
      adminInfo = this.responseText;
    }
  };

  xhttp.open("POST", url, false);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
}

</script>

<head>
  <title>RICH &mdash; Reach Into Cultural Heights</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700|Work+Sans:300,400,700" rel="stylesheet">
  <link rel="stylesheet" href="fonts/icomoon/style.css">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/magnific-popup.css">
  <link rel="stylesheet" href="css/jquery-ui.css">
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/animate.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mediaelement@4.2.7/build/mediaelementplayer.min.css">

  <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

  <link rel="stylesheet" href="css/aos.css">

  <link rel="stylesheet" href="css/style.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

</head>
<body>

  <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    <div id = "myLogo" class="site-navbar-wrap js-site-navbar bg-white">

      <div class="container-fluid">

        <div class="text-center">
          <a href = "index.html"><img class = "img-fluid" src="images/LOGO-Larger.png"  href="index.html" alt="..."></a>
        </div>

        <div class="site-navbar bg-light">
          <div class="py-1">
            <div class="row align-items-left">

              <div class="col-12">
                <nav class="site-navigation text-right" role="navigation">
                  <div class="container-fluid">
                    <div class="d-inline-block d-lg-none ml-md-0 mr-auto py-3"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>

                    <ul class="site-menu js-clone-nav d-none d-lg-block" style = "padding-inline-start: 0px;">

                      <li style="float:left;">
                        <div style="font-size: 27px;" id = "adminInfo">

                        </div>
                      </li>

                      <li><a style = "font-size: 16px;" href="roster.html">Roster</a></li>
                      <!--
                      <li><a style = "font-size: 16px;" href="sessions.html">Personal-Profile</a></li>
                      <li><a style = "font-size: 16px;" href="projects.html">Projects</a></li>
                      <li><a style = "font-size: 16px;" href="discussion.html">Safe-Space</a></li>
                      -->
                      <li> <button style = "padding-top: 6px; padding-bottom: 6px; background: #ff9393; font-size: 20px;" onclick = "Logout()"> Logout </button> </li>

                    </ul>
                  </div>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id = "logoHeight" style="height: 400px;"></div>


    <!--<div id "logoHeight" style="height: 250px;"></div>-->

    <div style="padding-bottom: 200px;" class="text-center">
      <div id = "piaContainer" class="container">
        <div class = "col-md-12 mx-auto no-sidebar" >
          <div id = "assignmentContainer" class="shapely-content">
            <!--
            <div class = "text-center">
              <h3> Search By Student Email </h3><br>
              <input id = "studentEmail" style = "width: 40%;" type = "text">
              <button onclick = "getAllStudentData()"> <span class="glyphicon glyphicon-search"></span> </button>
            </div><br>
            -->


            <div style = "padding-left: 0px; padding-right: 0px;" class = "container-fluid" id = "studentData">
              <div id = "header"></div><br><br>
              <div class = "text-center">
                <button id = "settingsTab" onclick = "getAllStudentData(this.id);" style = "width: 24%; padding: 10px; background: lightblue;">Information</button>
                <button id = "badgesTab" onclick = "getAllStudentData(this.id);" style = "width: 24%; padding: 10px; background: lightblue;">Badges</button>
                <button id = "projectsTab" onclick = "getAllStudentData(this.id);" style = "width: 24%; padding: 10px; background: lightblue;">Projects</button>
                <button id = "writingsTab" onclick = "getAllStudentData(this.id);" style = "width: 24%; padding: 10px; background: lightblue;">Writings</button>
              </div><br><br>
              <div id = "studentTab" class = "container-fluid"></div><br>
            </div>
          </div>
        </div>
      </div>
    </div>


    <footer class="site-footer">
      <div class="container">
  
        <div class="row">
          <div class="col">
            <p class="text-center">
                Email: rich@att.net
                <br>
                Phone: (929) 242-9036
                <br>
                Address: Tech Incubator at Queens College, 65-30 Kissena Blvd, Flushing, NY 11367
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
             <br>
              Copyright &copy;
              <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
              <script>document.write(new Date().getFullYear());</script> All Rights Reserved | This template is made by <a
                href="https://colorlib.com" target="_blank">Colorlib</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
  
        </div>
      </div>
    </footer>
    </div>



  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/jquery.countdown.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/bootstrap-datepicker.min.js"></script>
  <script src="js/aos.js"></script>

  <script src="js/mediaelement-and-player.min.js"></script>

  <script src="js/main.js"></script>

  <script>

  window.onscroll = function() {

    if (window.pageYOffset > 20) {
      document.getElementById("myLogo").style.top = "-250px";
      document.getElementById("logoHeight").style.height = "220px";
    } else {
      document.getElementById("myLogo").style.top = "0px";
      document.getElementById("logoHeight").style.height = "375px";
    }
  }

  var adminInfo;
  getAdminInfo();

  document.getElementById("adminInfo").innerHTML = "Hello " + adminInfo;

  var studentEmail;
  getEmail();

  getAllStudentData("settingsTab");

  function getAdminInfo(){
    mode = "getAdminInfo";

    var xhttp = new XMLHttpRequest();
    var url = "php/AdminsRICH.php";
    var params = "mode=" + mode;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        adminInfo = this.responseText;
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  var profileData = [];
  var Badges = [];
  var Projects = [];
  var Writings = [];

  function showSettings(){

    var profileContainer = document.getElementById("studentTab");
    profileContainer.innerHTML = "";

    var myInformation = document.createElement("h3");
    myInformation.className = "text-center";
    var informationTitle = document.createTextNode("Information");
    myInformation.appendChild(informationTitle);

    var FullName = profileData[0].FirstName + " " + profileData[0].LastName;

    var nameHolder = document.createElement("h5");
    var nameText = document.createTextNode("Name:");
    nameHolder.appendChild(nameText);
    var name = document.createTextNode(FullName);

    var emailHolder = document.createElement("h5");
    var emailText = document.createTextNode("Email Address:");
    emailHolder.appendChild(emailText);
    var email = document.createTextNode(profileData[0].EmailAddress);

    var dobHolder = document.createElement("h5");
    var dobText = document.createTextNode("Date Of Birth:");
    dobHolder.appendChild(dobText);
    var dateOfBirth = document.createTextNode(profileData[0].DOB);

    var gradeHolder = document.createElement("h5");
    var gradeText = document.createTextNode("Grade Level:");
    gradeHolder.appendChild(gradeText);
    var gradeLevel = document.createTextNode("Grade " + profileData[0].GradeLevel);

    profileContainer.appendChild(myInformation);
    //profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(nameHolder);
    //profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(name);
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(emailHolder);
    //profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(email);
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(dobHolder);
    //profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(dateOfBirth);
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(gradeHolder);
    //profileContainer.appendChild(document.createElement("br"));
    profileContainer.appendChild(gradeLevel);

  }

  function getProfileData(studentEmail){
    mode = "getProfileData";

    var xhttp = new XMLHttpRequest();
    var url = "php/AdminsRICH.php";
    var params = "mode=" + mode + "&email=" + studentEmail;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        profileData = JSON.parse(this.responseText);
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function showBadges(){
    var badgesContainer = document.getElementById("studentTab");
    badgesContainer.innerHTML = "";

    var studentBadges = document.createElement("h3");
    studentBadges.className = "text-center";
    var badgesTitle = document.createTextNode("Badges");
    studentBadges.appendChild(badgesTitle);

    badgesContainer.appendChild(studentBadges);
    badgesContainer.appendChild(document.createElement("br"));

    var imageContainer = document.createElement("div");
    imageContainer.className = "container-fluid text-center";

    if (Badges.length == 0) getBadges(document.getElementById("studentEmail"));

    var row1 = document.createElement("div");
    row1.className = "row";
    var row2 = document.createElement("div");
    row2.className = "row";
    var row3 = document.createElement("div");
    row3.className = "row";
    var row4 = document.createElement("div");
    row4.className = "row";

    var img1 = document.createElement("img");
    img1.src = "images/matterBadge.png";
    img1.className = "col-md-3 col-lg-3 col-sm-6";
    img1.style.width = "50%";
    img1.style.height = "50%";

    var img2 = document.createElement("img");
    img2.src = "images/responsibleBadge.png";
    img2.className = "col-md-3 col-lg-3 col-sm-6";
    img2.style.width = "50%";
    img2.style.height = "50%";

    var img3 = document.createElement("img");
    img3.src = "images/considerateBadge.png";
    img3.className = "col-md-3 col-lg-3 col-sm-6";
    img3.style.width = "50%";
    img3.style.height = "50%";

    var img4 = document.createElement("img");
    img4.src = "images/strategiesBadge.png";
    img4.className = "col-md-3 col-lg-3 col-sm-6";
    img4.style.width = "50%";
    img4.style.height = "50%";

    for (var i = 0; i < Badges.length; i++){
      if (Badges[i].AnswerTopic == "matter") row1.appendChild(img1.cloneNode(true));
      if (Badges[i].AnswerTopic == "considerate") row2.appendChild(img2.cloneNode(true));
      if (Badges[i].AnswerTopic == "responsible") row3.appendChild(img3.cloneNode(true));
      if (Badges[i].AnswerTopic == "strategies") row4.appendChild(img4.cloneNode(true));
    }

    imageContainer.appendChild(row1);
    imageContainer.appendChild(document.createElement("br"));
    imageContainer.appendChild(row2);
    imageContainer.appendChild(document.createElement("br"));
    imageContainer.appendChild(row3);
    imageContainer.appendChild(document.createElement("br"));
    imageContainer.appendChild(row4);

    badgesContainer.appendChild(imageContainer);

  }

  function getBadges(studentEmail){
    mode = "getBadgesAdmin";

    var xhttp = new XMLHttpRequest();
    var url = "php/SurveyAnswers.php";
    var params = "mode=" + mode + "&email=" + studentEmail;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        var myArray = JSON.parse(this.responseText);
        if (myArray.length != 0){
          for (var i = 0; i < myArray.length; i++){
            Badges.push(myArray[i]);
          }
        }
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function showProjects(){
    var projectsContainer = document.getElementById("studentTab");
    projectsContainer.innerHTML = "";

    var ProjectsHolder = document.createElement("h3");
    ProjectsHolder.className = "text-center";
    var projectsTitle = document.createTextNode("Projects");
    ProjectsHolder.appendChild(projectsTitle);

    projectsContainer.appendChild(ProjectsHolder);
    projectsContainer.appendChild(document.createElement("br"));

    for (var i = 0; i < Projects.length; i++){
      var projectDIV = document.createElement("div");
      projectDIV.style.paddingLeft = "15px";
      projectDIV.style.paddingRight = "15px";
      projectDIV.style.paddingBottom = "15px";
      projectDIV.style.background = "aliceblue";
      projectDIV.style.border = "1px solid";

      var projectName = document.createElement("h4");
      projectName.className = "text-center";
      var projectNameText = document.createTextNode(Projects[i].ProjectName);
      projectName.appendChild(projectNameText)

      var essayHolder = document.createElement("p");
      essayHolder.style.textAlign = "justify";
      var essayText = document.createTextNode(Projects[i].Essay);
      essayHolder.appendChild(essayText);

      projectDIV.appendChild(projectName);
      projectDIV.appendChild(document.createElement("br"));
      projectDIV.appendChild(essayHolder);

      projectsContainer.appendChild(projectDIV);

    }

  }

  function getProjects(studentEmail){
    mode = "getProjectsAdmin";

    var xhttp = new XMLHttpRequest();
    var url = "php/RICHProjects.php";
    var params = "mode=" + mode + "&email=" + studentEmail;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        var myArray = JSON.parse(this.responseText);
        if (myArray.length != 0){
          for (var i = 0; i < myArray.length; i++){
            Projects.push(myArray[i]);
          }
        }
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function showWritings(){
    var writingsContainer = document.getElementById("studentTab");
    writingsContainer.innerHTML = "";

    var writingsHolder = document.createElement("h3");
    writingsHolder.className = "text-center";
    var writingsTitle = document.createTextNode("Writings");
    writingsHolder.appendChild(writingsTitle);

    writingsContainer.appendChild(writingsHolder);
    writingsContainer.appendChild(document.createElement("br"));

    var writingsROW = document.createElement("div");
    writingsROW.className = "row";
    writingsROW.id = "writingsROW";

    for (var i = 0; i < Writings.length; i++){
      var writingsDIV = document.createElement("div");
      writingsDIV.className = "col-lg-6 col-md-6 col-sm-2";
      writingsDIV.style.paddingLeft = "15px";
      writingsDIV.style.paddingRight = "15px";
      writingsDIV.style.paddingBottom = "15px";
      writingsDIV.style.background = "aliceblue";
      writingsDIV.style.border = "1px solid";

      var writingName = document.createElement("h4");
      writingName.className = "text-center";
      var writingNameText = document.createTextNode(Writings[i].DateAdded);
      writingName.appendChild(writingNameText)

      var essayHolder = document.createElement("p");
      essayHolder.style.textAlign = "justify";
      var essayText = document.createTextNode(Writings[i].Essay);
      essayHolder.appendChild(essayText);

      writingsDIV.appendChild(writingName);
      writingsDIV.appendChild(document.createElement("br"));
      writingsDIV.appendChild(essayHolder);

      writingsROW.appendChild(writingsDIV);

    }
    writingsContainer.appendChild(writingsROW);

  }

  function getWritings(studentEmail){
    mode = "getWritingsAdmin";

    var xhttp = new XMLHttpRequest();
    var url = "php/RICHProjects.php";
    var params = "mode=" + mode + "&email=" + studentEmail;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        var myArray = JSON.parse(this.responseText);
        if (myArray.length != 0){
          for (var i = 0; i < myArray.length; i++){
            Writings.push(myArray[i]);
          }
        }
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function getEmail(){
    mode = "getEmail";

    var xhttp = new XMLHttpRequest();
    var url = "php/AdminsRICH.php";
    var params = "mode=" + mode;

    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200){
        if (this.responseText != null){
          studentEmail = this.responseText;
        }
      }
    };

    xhttp.open("POST", url, false);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send(params);
  }

  function getAllStudentData(id){
    //var studentEmail = document.getElementById("studentEmail").value;
    //var studentEmail;
    //getEmail();

    profileData = [];
    Badges = [];
    Projects = [];
    Writings = [];

    var studentDataContainer = document.getElementById("studentData");
    //studentDataContainer.style.border = "3px solid";

    var studentTab = document.getElementById("studentTab");

    if (document.getElementById("header").innerHTML == ""){
      var header = document.createElement("h2");
      header.className = "text-center";
      headerText = document.createTextNode("Student Data");
      header.appendChild(headerText);

      document.getElement